FROM debian:stretch

RUN apt-get update && \
    apt-get install -y openssh-server

COPY sshd_config /etc/ssh/
COPY users.txt /

# Add SSH users
RUN while read username; do useradd --groups ssh --no-create-home --no-user-group $username; done </users.txt;
RUN mkdir /run/sshd

CMD ["/usr/sbin/sshd", "-D", "-f", "/etc/ssh/sshd_config"]
